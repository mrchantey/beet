use beet_core::prelude::*;
/// probably the best templating layout ever
#[derive(Clone, Component)]
#[component(on_add = on_add_my_node)]
pub(crate) struct MyNode {
    /// some comment
    pub foo: u32,
}
fn on_add_my_node(mut world: DeferredWorld, cx: HookContext) {
    let entity = cx.entity;
    world
        .commands()
        .queue(move |world: &mut World| {
            let mut entity_world_mut = world.entity_mut(entity);
            let id = entity_world_mut.id();
            let this = entity_world_mut.get::<MyNode>().unwrap().clone();
            world
                .run_async_local(async move |world| {
                    let bar = world.entity(id);
                    let bundle = {
                        #[allow(unused_variables, unused_assignments)]
                        let MyNode { foo } = this;
                        ()
                    };
                    bar.insert(bundle).await;
                });
        });
}
